# 배포 가이드

## 방법 1: Streamlit Cloud (추천 - 무료)

### 준비 사항
1. GitHub 계정
2. OpenAI API 키

### 배포 단계

#### 1단계: GitHub 저장소 생성
1. GitHub에 로그인
2. 새 저장소(Repository) 생성
3. 저장소 이름 입력 (예: `vibe_qna5`)
4. Public 또는 Private 선택
5. "Create repository" 클릭

#### 2단계: 코드 업로드
프로젝트 폴더에서 다음 명령어 실행:

```bash
# Git 초기화 (처음인 경우)
git init

# .gitignore 파일 확인 (중요!)
# API 키와 생성된 인덱스는 업로드하지 않습니다

# 파일 추가
git add .

# 커밋
git commit -m "Initial commit"

# 원격 저장소 연결 (YOUR-USERNAME를 본인 계정으로 변경)
git remote add origin https://github.com/YOUR-USERNAME/vibe_qna5.git

# 업로드
git branch -M main
git push -u origin main
```

#### 3단계: Streamlit Cloud 배포
1. [Streamlit Cloud](https://streamlit.io/cloud) 접속
2. "Sign up" 또는 "Sign in" (GitHub 계정으로 로그인)
3. "New app" 클릭
4. 저장소 선택:
   - Repository: `YOUR-USERNAME/vibe_qna5`
   - Branch: `main`
   - Main file path: `app.py`
5. "Advanced settings" 클릭
6. "Secrets" 섹션에 다음 내용 입력:
   ```toml
   OPENAI_API_KEY = "your-openai-api-key-here"
   ```
7. "Deploy!" 클릭
8. 배포 완료! (약 2-3분 소요)

#### 배포 후 URL
- `https://YOUR-APP-NAME.streamlit.app` 형태의 URL이 생성됩니다
- 이 URL을 공유하면 누구나 접속 가능합니다

---

## 방법 2: 로컬 서버 실행

### Windows에서 실행

#### 간편 실행 (RUN.bat 사용)
1. `RUN.bat` 파일 더블클릭
2. 자동으로 브라우저가 열립니다

#### 수동 실행
```bash
# 1. 패키지 설치 (최초 1회)
pip install -r requirements.txt

# 2. API 키 설정
# .streamlit\secrets.toml 파일에 API 키 입력
# 또는 환경변수 설정:
set OPENAI_API_KEY=your-api-key-here

# 3. 실행
streamlit run app.py
```

### Linux/Mac에서 실행
```bash
# 1. 패키지 설치
pip install -r requirements.txt

# 2. API 키 설정
export OPENAI_API_KEY=your-api-key-here

# 3. 실행
streamlit run app.py
```

---

## 방법 3: Docker 배포

### Dockerfile 사용
```bash
# 1. Docker 이미지 빌드
docker build -t vibe-qna-bot .

# 2. Docker 컨테이너 실행
docker run -p 8501:8501 -e OPENAI_API_KEY=your-api-key-here vibe-qna-bot
```

### 접속
- http://localhost:8501

---

## 방법 4: 기타 클라우드 플랫폼

### Heroku
1. Heroku 계정 생성
2. `Procfile` 생성 (이미 제공됨)
3. Heroku CLI로 배포:
   ```bash
   heroku create your-app-name
   heroku config:set OPENAI_API_KEY=your-api-key-here
   git push heroku main
   ```

### AWS EC2
1. EC2 인스턴스 생성
2. 보안 그룹에서 8501 포트 오픈
3. 서버에 접속하여 프로젝트 클론
4. `requirements.txt` 설치
5. `streamlit run app.py --server.port 8501 --server.address 0.0.0.0`

### Google Cloud Run
1. `Dockerfile` 사용
2. Google Cloud Console에서 배포
3. 환경변수에 API 키 설정

---

## 중요 보안 사항

### ⚠️ API 키 보안
- **절대로** API 키를 코드에 직접 입력하지 마세요
- **절대로** API 키를 GitHub에 업로드하지 마세요
- `.gitignore`에 다음 파일들이 포함되어 있는지 확인:
  - `.env`
  - `.streamlit/secrets.toml`
  - `faiss_index/` (선택사항)

### 배포 전 체크리스트
- [ ] `.gitignore` 파일 확인
- [ ] API 키가 코드에 하드코딩되어 있지 않은지 확인
- [ ] `requirements.txt`가 최신 상태인지 확인
- [ ] 로컬에서 정상 작동하는지 테스트
- [ ] PDF 문서가 `data/` 폴더에 있는지 확인

---

## 문제 해결

### "No module named 'streamlit'" 오류
```bash
pip install -r requirements.txt
```

### "OpenAI API 키가 설정되지 않았습니다" 오류
- Streamlit Cloud: Secrets 섹션에 API 키 추가
- 로컬: `.streamlit/secrets.toml` 파일 생성 또는 환경변수 설정

### "data 폴더에 PDF 문서를 추가해주세요" 오류
- `data/` 폴더에 PDF 파일이 있는지 확인
- PDF 파일 권한 확인

### Streamlit Cloud에서 메모리 부족 오류
- PDF 파일이 너무 크거나 많을 경우 발생
- 해결: PDF 파일 수를 줄이거나 크기를 압축

---

## 비용 정보

### Streamlit Cloud
- **무료 플랜**: 1개 앱, 충분한 리소스
- **Pro 플랜**: $20/월, 무제한 앱

### OpenAI API
- **GPT-3.5-turbo**: 약 $0.002/1K 토큰
- 예상 비용: 질문 1회당 약 $0.01~0.05
- 월 100회 질문 시 약 $1~5

---

## 추가 자료

- [Streamlit Cloud 공식 문서](https://docs.streamlit.io/streamlit-community-cloud)
- [Streamlit Secrets 관리](https://docs.streamlit.io/streamlit-community-cloud/deploy-your-app/secrets-management)
- [OpenAI API 문서](https://platform.openai.com/docs)

---

## 지원

문제가 발생하면 다음을 확인하세요:
1. 로그 메시지
2. Streamlit Cloud 로그 (배포 시)
3. API 키 유효성
4. 네트워크 연결


